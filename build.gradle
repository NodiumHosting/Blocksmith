plugins {
    id 'java'
    id 'com.gradleup.shadow' version "8.3.0"
    id 'io.freefair.lombok' version "8.11"
}

group = 'com.nodiumhosting'
version = '1.0'

repositories {
    mavenCentral()
}

dependencies {
    implementation 'ch.qos.logback:logback-core:1.5.18'
    implementation 'ch.qos.logback:logback-classic:1.5.18'

    implementation 'net.minestom:minestom-snapshots:1_21_5-99d5eca286'

    implementation 'team.unnamed:creative-api:1.7.3'
    implementation 'team.unnamed:creative-serializer-minecraft:1.7.3'
    implementation 'team.unnamed:creative-server:1.7.3'
}

java {
    toolchain {
        languageVersion.set(JavaLanguageVersion.of(21)) // Minestom has a minimum Java version of 21
    }
}

tasks {
    jar {
        manifest {
            attributes["Main-Class"] = "com.nodiumhosting.blocksmith.Blocksmith"
        }
    }

    build {
        dependsOn(shadowJar)
    }
    shadowJar {
        mergeServiceFiles()
        archiveClassifier.set("") // Prevent the -all suffix on the shadowjar file.
    }
}